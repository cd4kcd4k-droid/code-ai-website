<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ - StarCoder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-top: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.2em;
            margin-bottom: 8px;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .api-key-section {
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
            text-align: center;
        }
        
        .api-key-input {
            width: 300px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 0 10px;
        }
        
        .save-key-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .chat-container {
            height: 500px;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
        }
        
        .message {
            margin: 15px 0;
            padding: 15px;
            border-radius: 15px;
            max-width: 80%;
            animation: fadeIn 0.3s ease;
        }
        
        .user-message {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }
        
        .assistant-message {
            background: white;
            border: 1px solid #e9ecef;
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }
        
        .typing-indicator {
            display: none;
            padding: 15px;
            text-align: center;
            color: #666;
            font-style: italic;
        }
        
        .input-container {
            display: flex;
            padding: 20px;
            background: white;
            border-top: 1px solid #eee;
            gap: 10px;
            align-items: center;
        }
        
        #chatInput {
            flex: 1;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 1.1em;
            outline: none;
            transition: all 0.3s ease;
        }
        
        #chatInput:focus {
            border-color: #667eea;
        }
        
        #sendBtn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 12px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        #sendBtn:hover:not(:disabled) {
            transform: translateY(-2px);
        }
        
        #sendBtn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .model-info {
            background: #e7f3ff;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 0.9em;
            color: #0066cc;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .chat-container {
                height: 400px;
            }
            
            .api-key-input {
                width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¤– Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ - StarCoder</h1>
            <p>Ù…Ø¯Ø¹ÙˆÙ… Ø¨Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</p>
        </div>
        
        <div class="api-key-section">
            <input type="password" class="api-key-input" id="apiKeyInput" 
                   placeholder="Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ Hugging Face API (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
            <button class="save-key-btn" onclick="saveApiKey()">Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­</button>
            <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                Ø¨Ø¯ÙˆÙ† Ù…ÙØªØ§Ø­ØŒ Ø³ÙŠØ¹Ù…Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ù…Ø­Ù„ÙŠØ§Ù‹ Ø¨Ø¥Ù…ÙƒØ§Ù†ÙŠØ§Øª Ù…Ø­Ø¯ÙˆØ¯Ø©
            </div>
        </div>
        
        <div class="chat-container" id="chatContainer">
            <div class="assistant-message">
                <div class="model-info">
                    ğŸš€ Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…Ø¯Ø¹ÙˆÙ… Ø¨Ù†Ù…Ø§Ø°Ø¬ Ù…ØªÙ‚Ø¯Ù…Ø© | Ø§Ù„Ø¥ØµØ¯Ø§Ø±: StarCoder-Enhanced
                </div>
                ğŸŒŸ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…. ÙŠÙ…ÙƒÙ†Ù†ÙŠ:
                <br>â€¢ ğŸ¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©
                <br>â€¢ ğŸ’» ÙƒØªØ§Ø¨Ø© ÙˆØªØµØ­ÙŠØ­ Ø§Ù„ÙƒÙˆØ¯
                <br>â€¢ ğŸš€ Ø´Ø±Ø­ Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„ØªÙ‚Ù†ÙŠØ©
                <br>â€¢ ğŸ“š ØªÙ‚Ø¯ÙŠÙ… Ù†ØµØ§Ø¦Ø­ ØªØ·ÙˆÙŠØ±ÙŠØ©
                <br><br>Ø§Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù† Ø£ÙŠ Ø´ÙŠØ¡!
            </div>
        </div>
        
        <div class="typing-indicator" id="typingIndicator">
            âš¡ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ ÙŠÙƒØªØ¨... <span class="typing-dots"></span>
        </div>
        
        <div class="input-container">
            <input type="text" id="chatInput" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ø£Ùˆ Ø·Ù„Ø¨Ùƒ Ù‡Ù†Ø§..." autocomplete="off">
            <button id="sendBtn">Ø¥Ø±Ø³Ø§Ù„ ğŸš€</button>
        </div>
    </div>

    <script>
        // ============ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… ============
        class AdvancedAIAssistant {
            constructor() {
                this.conversationHistory = [];
                this.apiKey = localStorage.getItem('hf_api_key') || '';
                this.isOnline = false;
                this.init();
            }

            init() {
                this.updateStatus();
                this.loadConversationHistory();
            }

            updateStatus() {
                this.isOnline = !!this.apiKey;
                const statusElement = document.querySelector('.model-info');
                if (statusElement) {
                    statusElement.innerHTML = this.isOnline ? 
                        'ğŸŸ¢ Ù…ØªØµÙ„ - StarCoder API' : 
                        'ğŸŸ¡ ÙˆØ¶Ø¹ ØºÙŠØ± Ù…ØªØµÙ„ - Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ù…Ø­Ù„ÙŠ';
                }
            }

            async generateResponse(userMessage) {
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø³Ø¬Ù„
                this.conversationHistory.push({ role: 'user', content: userMessage });
                
                let response = '';

                if (this.isOnline && this.apiKey) {
                    response = await this.callStarCoderAPI(userMessage);
                } else {
                    response = this.generateLocalResponse(userMessage);
                }

                // Ø­ÙØ¸ Ø§Ù„Ø±Ø¯ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„
                this.conversationHistory.push({ role: 'assistant', content: response });
                this.saveConversationHistory();
                
                return response;
            }

            async callStarCoderAPI(userMessage) {
                try {
                    const response = await fetch('https://api-inference.huggingface.co/models/bigcode/starcoder', {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${this.apiKey}`,
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            inputs: this.buildPrompt(userMessage),
                            parameters: {
                                max_new_tokens: 500,
                                temperature: 0.7,
                                do_sample: true,
                                return_full_text: false
                            }
                        }),
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    return result[0]?.generated_text || this.generateLocalResponse(userMessage);
                    
                } catch (error) {
                    console.error('API Error:', error);
                    return `âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}. Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ù…Ø­Ù„ÙŠ...\n\n${this.generateLocalResponse(userMessage)}`;
                }
            }

            buildPrompt(userMessage) {
                return `Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±. 
Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${userMessage}

Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯:`;
            }

            generateLocalResponse(userMessage) {
                const lowerMessage = userMessage.toLowerCase();
                
                // Ù†Ø¸Ø§Ù… Ø°ÙƒÙŠ Ù…Ø­Ù„ÙŠ Ù…Ø­Ø³Ù†
                const responses = {
                    programming: [
                        "ğŸ¯ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ø³Ø¤Ø§Ù„Ùƒ Ø¹Ù† Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ Ø£Ù†ØµØ­Ùƒ Ø¨Ù€:\nâ€¢ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª\nâ€¢ ØªØ¹Ù„Ù… JavaScript Ø£Ùˆ Python\nâ€¢ Ù…Ù…Ø§Ø±Ø³Ø© Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©\nâ€¢ Ø¨Ù†Ø§Ø¡ Ù…Ø´Ø§Ø±ÙŠØ¹ ØµØºÙŠØ±Ø© Ø£ÙˆÙ„Ø§Ù‹",
                        "ğŸ’» ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ Ø§Ù„Ù…ÙØªØ§Ø­ Ù‡Ùˆ:\nâ€¢ Ø§Ù„ÙÙ‡Ù… Ø§Ù„Ø¹Ù…ÙŠÙ‚ Ù„Ù„Ù…ÙØ§Ù‡ÙŠÙ…\nâ€¢ Ø§Ù„ØªØ¯Ø±Ø¬ ÙÙŠ Ø§Ù„ØªØ¹Ù„Ù…\nâ€¢ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ù…Ø³ØªÙ…Ø±Ø©\nâ€¢ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…ÙØªÙˆØ­Ø© Ø§Ù„Ù…ØµØ¯Ø±",
                        "ğŸš€ Ù„ØªØ·ÙˆÙŠØ± Ù…Ù‡Ø§Ø±Ø§ØªÙƒ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©:\nâ€¢ Ø§Ø¨Ø¯Ø£ Ø¨Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø³ÙŠØ·Ø©\nâ€¢ ØªØ¹Ù„Ù… Ù…Ù† Ø§Ù„Ø£Ø®Ø·Ø§Ø¡\nâ€¢ Ø§Ù‚Ø±Ø£ ÙƒÙˆØ¯ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†\nâ€¢ Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø§Ù„Ø´ØºÙ ÙˆØ§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ø³ØªÙ…Ø±"
                    ],
                    javascript: [
                        "ğŸ“œ JavaScript - Ù„ØºØ© ÙˆÙŠØ¨ Ù‚ÙˆÙŠØ©!\nâ€¢ Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Øª (Frontend/Backend)\nâ€¢ Ø¥Ø·Ø§Ø± Ø¹Ù…Ù„ Ù…Ø«Ù„ React, Vue, Angular\nâ€¢ Node.js Ù„Ù„Ø®Ø§Ø¯Ù…\nâ€¢ npm Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø²Ù…",
                        "ğŸ¯ Ù†ØµØ§Ø¦Ø­ JavaScript:\nâ€¢ ÙÙ‡Ù… Ø§Ù„Ù€ DOM Ø¬ÙŠØ¯Ø§Ù‹\nâ€¢ ØªØ¹Ù„Ù… Ø§Ù„Ù€ ES6+ features\nâ€¢ Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ù€ Async Programming\nâ€¢ ØªØ¹Ù„Ù… debugging Ø¨Ø´ÙƒÙ„ ÙØ¹Ø§Ù„"
                    ],
                    html: [
                        "ğŸ“ HTML - Ù‡ÙŠÙƒÙ„ Ø§Ù„ÙˆÙŠØ¨!\nâ€¢ semantic tags Ù…Ù‡Ù…Ø© Ù„Ù„Ù€ SEO\nâ€¢ accessibility Ø¶Ø±ÙˆØ±ÙŠØ©\nâ€¢ structure Ø³Ù„ÙŠÙ… Ù„Ù„Ù…Ø­ØªÙˆÙ‰\nâ€¢ Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª",
                        "ğŸ¨ HTML Ù†ØµØ§Ø¦Ø­:\nâ€¢ Ø§Ø³ØªØ®Ø¯Ø§Ù… HTML5 tags\nâ€¢ Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø¨Ù€ accessibility\nâ€¢ structure Ù†Ø¸ÙŠÙ ÙˆÙ…Ù†Ø¸Ù…\nâ€¢ validation Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª"
                    ],
                    css: [
                        "ğŸ¨ CSS - Ø¬Ù…Ø§Ù„ Ø§Ù„ÙˆÙŠØ¨!\nâ€¢ Flexbox Ùˆ Grid Ù„Ù„ØªØ®Ø·ÙŠØ·\nâ€¢ CSS Variables Ù„Ù„Ø«ÙŠÙ…Ø§Øª\nâ€¢ Animations Ù„Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©\nâ€¢ Responsive Design Ù„Ù„Ø¬ÙˆØ§Ù„",
                        "ğŸ’« CSS Ù…ØªÙ‚Ø¯Ù…:\nâ€¢ CSS Grid Ù„Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ù…Ø¹Ù‚Ø¯\nâ€¢ Flexbox Ù„Ù„Ù…Ø­Ø§Ø°Ø§Ø©\nâ€¢ Custom Properties\nâ€¢ CSS-in-JS Ù„Ù„ØªÙÙƒÙŠØ± Ø¨Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª"
                    ],
                    default: [
                        "ğŸ¤” Ù‡Ø°Ø§ Ø³Ø¤Ø§Ù„ Ù…Ø«ÙŠØ± Ù„Ù„Ø§Ù‡ØªÙ…Ø§Ù…! Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ø¹Ø±ÙØªÙŠ:\n\nÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆÙŠØ¨ØŒ Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©ØŒ ÙˆØªÙ‚Ø¯ÙŠÙ… Ù†ØµØ§Ø¦Ø­ ØªØ·ÙˆÙŠØ±ÙŠØ©.\n\nÙ‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙˆØ¶ÙŠØ­ Ø³Ø¤Ø§Ù„Ùƒ Ø£ÙƒØ«Ø±ØŸ",
                        "ğŸ¯ Ø±Ø§Ø¦Ø¹! Ø£Ù†Ø§ Ù…ØªØ®ØµØµ ÙÙŠ:\nâ€¢ ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆÙŠØ¨ (HTML, CSS, JavaScript)\nâ€¢ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØ§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ©\nâ€¢ Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©\nâ€¢ Ù†ØµØ§Ø¦Ø­ Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‡Ù†ÙŠ\n\nÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ØªØ­Ø¯ÙŠØ¯Ø§Ù‹ØŸ",
                        "ğŸš€ Ù…Ù…ØªØ§Ø²! Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:\nâ€¢ ÙƒØªØ§Ø¨Ø© ÙˆØªØµØ­ÙŠØ­ Ø§Ù„ÙƒÙˆØ¯\nâ€¢ Ø´Ø±Ø­ Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©\nâ€¢ ØªØµÙ…ÙŠÙ… Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©\nâ€¢ ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©\n\nÙ…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø°ÙŠ ØªÙˆØ§Ø¬Ù‡Ù‡ØŸ"
                    ]
                };

                // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„
                if (lowerMessage.includes('Ø¨Ø±Ù…Ø¬') || lowerMessage.includes('ÙƒÙˆØ¯') || lowerMessage.includes('ØªØ·ÙˆÙŠØ±')) {
                    return this.getRandomResponse(responses.programming);
                } else if (lowerMessage.includes('Ø¬Ø§ÙØ§') || lowerMessage.includes('Ø³ÙƒØ±ÙŠØ¨Øª') || lowerMessage.includes('javascript')) {
                    return this.getRandomResponse(responses.javascript);
                } else if (lowerMessage.includes('html')) {
                    return this.getRandomResponse(responses.html);
                } else if (lowerMessage.includes('css')) {
                    return this.getRandomResponse(responses.css);
                } else {
                    return this.getRandomResponse(responses.default);
                }
            }

            getRandomResponse(responsesArray) {
                return responsesArray[Math.floor(Math.random() * responsesArray.length)];
            }

            saveConversationHistory() {
                localStorage.setItem('conversation_history', JSON.stringify(this.conversationHistory));
            }

            loadConversationHistory() {
                const saved = localStorage.getItem('conversation_history');
                if (saved) {
                    this.conversationHistory = JSON.parse(saved);
                }
            }

            clearHistory() {
                this.conversationHistory = [];
                localStorage.removeItem('conversation_history');
            }

            setApiKey(key) {
                this.apiKey = key;
                localStorage.setItem('hf_api_key', key);
                this.updateStatus();
            }
        }

        // ============ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ============
        const assistant = new AdvancedAIAssistant();

        function saveApiKey() {
            const keyInput = document.getElementById('apiKeyInput');
            const key = keyInput.value.trim();
            
            if (key) {
                assistant.setApiKey(key);
                keyInput.value = '';
                showNotification('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
            } else {
                showNotification('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ ØµØ­ÙŠØ­', 'error');
            }
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                background: ${type === 'success' ? '#28a745' : '#dc3545'};
                color: white;
                border-radius: 8px;
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function addMessage(content, isUser = false) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'assistant-message'}`;
            messageDiv.textContent = content;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function showTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            indicator.style.display = 'block';
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            indicator.style.display = 'none';
        }

        // ============ Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ============
        document.addEventListener('DOMContentLoaded', function() {
            const chatInput = document.getElementById('chatInput');
            const sendBtn = document.getElementById('sendBtn');
            const apiKeyInput = document.getElementById('apiKeyInput');

            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù…Ø­ÙÙˆØ¸
            if (assistant.apiKey) {
                apiKeyInput.placeholder = 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢';
            }

            async function sendMessage() {
                const question = chatInput.value.trim();
                if (!question) return;

                // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                addMessage(question, true);
                chatInput.value = '';
                sendBtn.disabled = true;

                // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø©
                showTypingIndicator();

                try {
                    // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø¯
                    const response = await assistant.generateResponse(question);
                    
                    // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø¤Ø´Ø± ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø±Ø¯
                    hideTypingIndicator();
                    addMessage(response);
                    
                } catch (error) {
                    hideTypingIndicator();
                    addMessage(`âŒ Ø­Ø¯Ø« Ø®Ø·Ø£: ${error.message}`);
                } finally {
                    sendBtn.disabled = false;
                    chatInput.focus();
                }
            }

            sendBtn.addEventListener('click', sendMessage);
            
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !sendBtn.disabled) {
                    sendMessage();
                }
            });

            // Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
            chatInput.focus();
        });
    </script>
</body>
</html>
